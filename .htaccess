# =========================================
# .htaccess â€” planetum.by
# Static site / Apache / cPanel
# =========================================

# --- Charset ---
AddDefaultCharset UTF-8

# --- Disable directory listing ---
Options -Indexes

# =========================================
# MIME TYPES (CRITICAL FOR FAVICON & SEO)
# =========================================
<IfModule mod_mime.c>
  AddType image/x-icon .ico
  AddType image/png .png
  AddType image/svg+xml .svg
  AddType application/manifest+json .webmanifest
</IfModule>

# =========================================
# ENABLE REWRITE
# =========================================
RewriteEngine On

# =========================================
# FORCE HTTPS (SAFE, WITHOUT REDIRECT LOOPS)
# =========================================
RewriteCond %{HTTPS} !=on
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# =========================================
# REMOVE index.html FROM URL
# =========================================
RewriteCond %{THE_REQUEST} \s/+(.*/)?index\.html[\s?] [NC]
RewriteRule ^(.*/)?index\.html$ https://%{HTTP_HOST}/$1 [R=301,L]

# =========================================
# TRAILING SLASH FIX (ONLY FOR DIRECTORIES)
# =========================================
RewriteCond %{REQUEST_FILENAME} -d
RewriteCond %{REQUEST_URI} !/$
RewriteRule ^(.+)$ https://%{HTTP_HOST}/$1/ [R=301,L]

# =========================================
# SECURITY HEADERS (SAFE FOR STATIC SITE)
# =========================================
<IfModule mod_headers.c>
  Header always set X-Content-Type-Options "nosniff"
  Header always set X-Frame-Options "SAMEORIGIN"
  Header always set X-XSS-Protection "1; mode=block"
  Header always set Referrer-Policy "strict-origin-when-cross-origin"
</IfModule>

# =========================================
# CACHE CONTROL (FAVICON, IMAGES, CSS, JS)
# =========================================
<IfModule mod_expires.c>
  ExpiresActive On

  ExpiresByType image/x-icon "access plus 30 days"
  ExpiresByType image/png "access plus 30 days"
  ExpiresByType image/svg+xml "access plus 30 days"
  ExpiresByType text/css "access plus 7 days"
  ExpiresByType application/javascript "access plus 7 days"
</IfModule>

# =========================================
# CUSTOM ERROR PAGES (OPTIONAL)
# =========================================
ErrorDocument 404 /404.html
ErrorDocument 403 /403.html
